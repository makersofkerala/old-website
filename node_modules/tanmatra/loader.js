const loadStore = (store) => {

    let data = null;

    if(f.isArr(store.shape)) data = f.map(d => loadData(d).data, store.data);

    else if(f.isObj(store.shape)) data = f.kvmap((k,v) => ({[k]: loadData(v).data}), store.data);

    else data = store.data;

    return f.merge(store, {data});
    
};

const loadData = (data) => {

    if(data.store) {
	
	return loadStore(data.store);

    } else if(data.ref) {

	return readFile(data.ref);

    } else {

	return {data};

    };

};
